# stapi/display/display.tcl -- derived from diodisplay.tcl

set display [::STDisplay #auto ?-confvar value? ... \
	-table table ?-keyfields key_list?  			_OR_
	-uri uri
]

One of -table or -uri must be provided.

	-table - use already opened table. If the ctable isn't wrapped
		with an "stapi" wrapper, wrap it... keyfields must be provided.

	-uri - Use ::stapi::connect to connect to a ctable from a URI. Any
		valid STAPI URI can be used.

CABLE_AWARE ONLY:

	-cache - cable-aware only, connect to a registered ctable server.
		hosts must be provided

Other config variables

	-debug 0-9
		Set debug level

	-csvfile filename
		Name of CSV file to generate, if enabled.

	[... mostly the same as DIOdisplay]

Methods for $display

	$display show
		Render all HTML for the page. Destroys $display.

	$display destroy
		Destroys $display

	$display state
		Returns a list of name-value pairs that represent the
		current state of the query, as CGI variables, for
		populating external links.

	$display function {Add|Show|...}
		Enable global function

	$display field name ?-configvar value?...
		Define a field

	$display alias name ?field?
		Define an alias for an existing field. Aliases are used
		to create multiple filtered columns based on the same field.

	$display filter name ?proc?
		Filter through [$proc $value_of_field] before displaying

	$display smartfilter name proc field2
		Filter through [$proc $value_of_field $value_of_field2]

		[redundant when I pull in the new DIOdisplay stuff]

	$display csvfilter name ?proc?
		Filter through [$proc $value_of_field] on generating a CSV file

	$display unfilter name ?proc?
		Filter entered text through [$proc text] before using to
		search table. This allows the user to enter (for example)
		a device name for a field that expects an IP address.

	$display order name $order
		Set sort order for field.

		[insert explanation here]

	$display case name $case
		Set whether the column can be matched uppercase or lowercase
		when doing a case-independent match, to allow better use
		of indexes in anchored matches.

	$display hovertext name $text
		Set hovertext for title

	$display blankval name $blank
		Value to treat as null

	$display limit $limit
		Set search terms to limit the displayed portion of the ctable

		[insert explanation here]

	$display attributes name $attribute_list
		Set attributes (eg "bgcolor=blue") for field

	$display hidden $cgivar $value
		Pass CGI variable needed by the page the display is embedded
		in through links and forms generated by STTPdisplay.

When using the display as an API, the ctable search passed to it may include
additional terms:

	  <> is a synonym for !=

	  imatch is a synonym for match
	  xmatch is a synonym for match_case

	  umatch field string

	    Equivalent to match_case field [toupper string]

	  lmatch field string

	    Equivalent to match_case field [tolower string]

	These extensions are used by STTPDisplay to allow fast indexed
	ctable searches ignoring case when the underlying ctable is known
	to have a field that is always upper or lower case, in a way that
	hides the differences between ctables and SQL tables.

