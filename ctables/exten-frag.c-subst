    /*
     * CTable code fragment to do metatable allocation that goes inside the
     * package *_Init code.
     *
     * $Id$
     *
     * Create the master table that has the registered proc table and stuff.
     *
     *  define the following variables and subst this:
     *   table
     */
    ${table}StructHeadTablePtr = (struct ${table}StructHeadTable *)ckalloc (sizeof (struct ${table}StructHeadTable));

    /* create the table for registering Tcl commands to appear as methods
     * of the table class and pass it in through Tcl's client data
     * mechanism
     */
    hashTablePtr = (Tcl_HashTable *)ckalloc (sizeof (Tcl_HashTable));
    Tcl_InitCustomHashTable (hashTablePtr, TCL_STRING_KEYS, NULL);
    ${table}StructHeadTablePtr->registeredProcTablePtr = hashTablePtr;

    ${table}StructHeadTablePtr->nextAutoCounter = 0;

    /* Create the ${table}MetaObjCmd command -- it's fairly equivalent to an
     * Itcl class in that it can create its own commands with their
     * own data spaces, etc.
     */
    Tcl_CreateObjCommand(interp, "${table}", (Tcl_ObjCmdProc *) ${table}MetaObjCmd, (ClientData)${table}StructHeadTablePtr, (Tcl_CmdDeleteProc *)NULL);

