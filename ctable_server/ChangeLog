

$Id$

1/29/08 peter
    * Added "sttp" utility command for sending commands to a ctable server
      from a shell script
    * Many changes to ctable_server and ctable_client to get restart logic
      correct.
	Simplified both.
	Added new proc ::ctable_server::serverwait to use instead of
	    "vwait Die" to allow ctable_server to terminate cleanly and
	    do cleanup outside the sttp process.

1/28/08 peter
    Change remote_ctable_send:
    * Call remote_ctable_cache_disconnect on sockets when detecting EOF
      on looking for a response
    Change remote_ctable_cache_connect:
    * Abandon sockets that are at EOF
    * Retry the socket connection, once, after 500 ms
    * discard the invalid connection instead of caching it if the server does
      not respond with a valid ctable_server string.

2/5/08 karl
    * Detect EOF from server socket rather than going into an infinite loop.

8/31/07 peter
    * make 'sttp:' and 'ctable:' synonymous in ctable-server.

1/21/07 karl
    * Add server-side support for search with -array and -array_with_nulls.

01/16/07 peter
    * Send requests and simple responses with newlines in them as
      # NNNN
      multi-line request or
      response NNNN bytes long

    * Make redirect remove cached ctable info in server.

12/30/06 peter

    * Add local "destroy" command to ctable client.
      This allows us to destroy the client without destroying the
      server. Kind of like the Neutron bomb.

    * Add remote "shutdown" and "redirect" to ctable server.
      And redirect ... -shutdown to kill both birds with one stone.

    * Make client *not* follow redirections for "shutdown" and "redirect".
      This allows us to attempt to shutdown a server without worrying
      about taking the wrong server out with friendly fire.

    * Make socket close always remove cached socket info in server.

    * Make socket close always remove cached table info in client.

11/28/06 karl
    * Parse all the variants of the ctable://-style URL including host,
      optional port, directory, table name, and optional stuff.

    * Begin a common code package between the ctable client and server.

11/27/06 karl
    * Use a ctable://-style URL to identify the host, optional port, and
      remote table when specifying a table.

    * Support redirects in the client and server.

    * Uplevel the code body when handling a remote ctable search with -code
      so that that code is at the right level to see variables in its context.

11/28/06 karl
    * Add an identifying message the ctable server sends upon connect
      that the client parses.

11/26/06 karl
    * Make remote search support -tabsep, -code, -key, -array_get, -get and
      -array_get_with_nulls.  Note that -array_get actually doesn't currently
      exclude nulls.
